# 안전드림(Safe182) API 설정 가이드

## 문제 상황

현재 사용 중인 API 키가 유효하지 않아 다음 오류 발생:
```
"result": "99",
"msg": "사용자아이디와 인증키가 올바르지 않습니다."
```

## API 키 발급 방법

### 1. 안전드림 홈페이지 접속
- URL: https://www.safe182.go.kr

### 2. API 신청
1. 홈페이지 상단 메뉴에서 **"데이터 개방"** 또는 **"API 신청"** 클릭
2. 회원가입 및 로그인
3. API 서비스 신청서 작성
   - 서비스명: 실종자 조회 API
   - 용도: 실종자 정보 통합 관리 시스템
   - 기타 필요 정보 입력

### 3. 승인 대기
- 승인까지 1~3 영업일 소요
- 승인되면 `esntlId`와 `authKey` 발급

### 4. 환경변수 설정

발급받은 인증 정보를 `backend/.env` 파일에 추가:

```env
# 안전드림(Safe182) 실종자 API 인증 정보
SAFE182_ESNTL_ID=발급받은_사용자ID
SAFE182_AUTH_KEY=발급받은_인증키
```

## 대체 방안

API 키 발급 전까지는 다음 방법으로 진행 가능:

### 1. Firebase 데이터만 사용
- 사용자 제보 데이터(`source: 'user_report'`)만 표시
- API 폴링 비활성화

### 2. 테스트 데이터 사용
- 개발용 목 데이터 생성
- Firebase에 샘플 데이터 수동 입력

## API 명세

### 엔드포인트
```
POST https://www.safe182.go.kr/api/lcm/findChildList.do
```

### 요청 파라미터
| 파라미터 | 필수 | 설명 |
|---------|------|------|
| esntlId | ✅ | 사용자 ID |
| authKey | ✅ | 인증키 |
| rowSize | ✅ | 조회 건수 (최대 1000) |
| writngTrgetDscds | ❌ | 대상 구분 코드 (복수 가능) |

### 대상 구분 코드
- `010`: 아동
- `020`: 일반가출
- `040`: 시설보호자
- `060`: 지적장애
- `061`: 18세 미만 지적장애
- `062`: 18세 이상 지적장애
- `070`: 치매
- `080`: 신원불상

### 응답 형식
```json
{
  "result": "00",  // "00": 성공, "99": 인증 실패
  "msg": "정상 처리되었습니다.",
  "totalCount": 1234,
  "list": [
    {
      "msspsnIdntfccd": "실종자식별코드",
      "nm": "이름",
      "sexdstnDscd": "남자",
      "ageNow": "15",
      "occrde": "20240101",
      "occrAdres": "서울시 강남구",
      "writngTrgetDscd": "010",
      ...
    }
  ]
}
```

## 문의

API 발급 및 사용 관련 문의:
- 안전드림 고객센터: 182
- 이메일: (홈페이지에서 확인)
