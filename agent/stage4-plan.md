# Stage 4 Execution Plan - 알림 & 커뮤니티 관리

## 목표
- 신고 워크플로우를 백엔드 + 프론트에서 연결하여 관리자가 댓글 신고를 확인하고 처리할 수 있도록 합니다.
- 사용자에게 댓글 관련 알림(공감, 신고 결과)을 전달하고 읽음 처리 UI를 제공합니다.
- 커뮤니티 건전성 유지를 위한 추가 보안/UX 개선 작업을 진행합니다.

## 작업 항목
1. **신고 목록 관리 UI 구축**
   - 관리자 대시보드에 댓글 신고 탭 추가 (list, filter, status 변경)
   - 신고 세부 모달(신고 사유, 댓글 미리보기, 처리 버튼)
   - 신고 처리 API 연동(`/api/comment-reports`, `/resolve`)

2. **댓글 알림 시스템 구현**
   - Firestore `commentNotifications` -> 프론트 알림센터 구성
   - 알림 목록 조회/읽음 처리 API 혹은 Firestore 직접 구독 검토
   - UI 요소: 헤더 벨 아이콘 뱃지, 알림 드롭다운/패널, 읽음 토글

3. **사용자 경험 & 보안 강화**
   - 신고 사유 선택 UI 개선 (프리셋 + 상세 입력)
   - 신고 후 사용자 안내 토스트/상태 업데이트
   - 악성 신고 방지를 위한 레이트리미트/토큰 로깅 추가 확인
   - 공감 수 기준 정렬 및 관리자 통계(필요 시)

4. **테스트 및 QA**
   - E2E: 신고 → 관리자 처리 → 숨김 여부 반영
   - 알림 수신/읽음 동작 검증
   - 신고 3회 자동 숨김, 관리자 해제 시 노출 정상화 확인

## 의존 사항
- Stage 2에서 구현한 댓글 신고 API(`comment-reports`) 동작이 선행 조건
- 관리자 계정/권한 가이드 정리 필요
- 프론트엔드 상태 관리(Zustand)에 알림/신고 상태 추가

## 완료 기준
- 관리자 UI에서 신고 접수 → 처리(숨김/해제)가 가능하고, 결과가 댓글에 반영됨
- 사용자 측 알림 UI가 기본 기능(조회/읽음)을 제공함
- 주요 시나리오에 대한 수동/E2E 테스트 결과를 stage4-note 로 기록
